# 1 章 ドメイン駆動設計とは

## 1-1

### ドメイン駆動設計の目的

- 価値のあるソフトウェアの構築のためには利用者の問題を見極める必要がある

  - → これを解決するための最善策の洞察を繰り返しながら設計を行い、ソフトウェアの利用者を取り巻く世界と実装を結びつけることが「ドメイン駆動設計」の目的

## 1-2

- ドメイン駆動設計 = ドメインの知識に焦点をあてた設計手法
  - → では「ドメイン」とは？

### ドメイン

- プログラムを適用する対象領域

- ただしドメインに含まれるもののほうが大事

  - → この含まれるものはシステムが対象にもの・領域によって変化する

### 知識に焦点をあてる

- 利用者が直面している問題の解決に必要なこと

  → 彼らが直面している問題を正確に理解すること

- では利用者が何に困っていて何を解決したいかを知るには

  → 彼らの考えや支店、取り巻く環境(=ドメイン)を正確に理解すること

- そして、ドメインの理解によっていその中から問題解決に役立つものを抽出して得られた知識をソフトウェアに反映する。
  - ※最新のフレームワークの導入は技術者の心を躍らせるが、的外れなソフトウェアにならないように注意が必要

### ドメインモデルとは

- モデル = 現実の事象や概念を抽象化した概念

  → モデルから何を取捨選択するかはドメインによる

- モデリング = 現実の事象や概念を抽象化する作業

- ドメインモデル = ドメイン駆動設計における、ドメインの概念をモデリングして得られたモデル

### 知識をコードで表現するドメインオブジェクト

- ドメインオブジェクト = ドメインモデルをソフトウェアで動作するモジュールとして表現したもの

- ドメインで起こった変化はまずドメインモデルに伝わる → そこからさらにドメインオブジェクトに伝わる。ただし逆にドメインオブジェクトがドメインに変化を起こす場合もある。イテレーティブ（反復的な）開発。

## 1-3

### 本書解説事項

- ドメイン駆動設計で語られる概念や用語の理解には多くの前提知識が要求される
- ドメイン駆動設計のプラクティスには実践の難しいものも存在する

### 本書のゴール

- 理解と実践がしやすい実装に関するパターンに集中してボトムアップで解説する。
  （概念の理解や実勢が難しいものは後回し）

- 少しずつ理解の領地を広げていくことで、ドメイン駆動設計の本質に立ち向かう準備を完了することをゴールとする。

## 1-4

### 本書で解説するパターンについて

- 知識を表現するパターン
  - 値オブジェクト
  - エンティティ
  - ドメインサービス
- アプリケーションを実現するパターン
  - リポジトリ
  - アプリケーションサービス
  - ファクトリ
- 知識を表現する、より発展的なパターン
  - 集約
  - 仕様

### 知識を表現するパターン

- ドメインの知識をオブジェクトとして表現するドメインオブジェクトの理解から始める
- 値オブジェクト → ドメイン固有の概念を値として表現するパターン
- エンティティ → 値オブジェクトと対をなす性質がある
- ドメインサービス → 値オブジェクトや円ディディではうまく表現できない知識を取り扱うためのパターン

### アプリケーションを実現するパターン

- 利用者の必要を満たすアプリケーションを構築するための手法を学ぶ
- リポジトリ → データ保存や復元といった永続化や再構築を担当するオブジェクト。データベースを抽象化したもの。
- アプリケーションサービス → 値オブジェクト・エンティティ・ドメインサービス・リポジトリの 4 つの要素で最低限の準備をすることで、実際に動くアプリケーションを構築できる。
- ファクトリ → オブジェクトを作る知識に特化したオブジェクトのこと。

### 知識を表現する、より発展的なパターン

- 集約 → 値オブジェクトやエンティティと言いたドメインオブジェクトを束ねて複雑なドメインの概念を表現する
- 仕様 → オブジェクトの評価をする
